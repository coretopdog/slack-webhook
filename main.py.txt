from fastapi import FastAPI, Request
import uvicorn

app = FastAPI()

@app.post("/slack/events")
async def slack_events(request: Request):
    payload = await request.json()

    # Slackã®challengeå¿œç­”ï¼ˆåˆå›ç¢ºèªç”¨ï¼‰
    if payload.get("type") == "url_verification":
        return {"challenge": payload.get("challenge")}

    # ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ï¼ˆå¿…è¦ã«å¿œã˜ã¦æ‹¡å¼µï¼‰
    event = payload.get("event", {})
    if event.get("type") == "message":
        print("ğŸ“© ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡:", event)
    elif event.get("type") == "app_mention":
        print("ğŸ‘‹ ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³æ¤œçŸ¥:", event)
    elif event.get("type") == "reaction_added":
        print("ğŸ‘ ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ :", event)

    return {"status": "ok"}

if __name__ == "__main__":
    uvicorn.run(app, host="0.0.0.0", port=8000)